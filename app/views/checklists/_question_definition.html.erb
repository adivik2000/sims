 <p>
 <a href="#<%= dom_id(question_definition,'link') %>" class="questionLink" name="<%= dom_id(question_definition,'link') %>">

   <span <%=highlight_if_wrong_question(@checklist,question_definition)%>><%= "#{question_definition.position}. #{question_definition.text}" %></span>
</a>
</p>
<div class="questionDiv" <%='style="display:none"' unless view %>>
  <% #pop off the first element if it is a relevance element  
  element_definitions = question_definition.element_definitions
  element_definitions, relevant =element_definitions.partition{|e| e.kind.to_sym != :applicable}
%>

  <%= render :partial => "checklists/relevant", :collection=>relevant  %>

  <table border ="1">
    <thead>
      <th></th>
      <% most_answers=question_definition.element_definitions.max{|a,b| a.answer_definitions.count <=> b.answer_definitions.count}
      max_count=1
         max_count = most_answers.answer_definitions.count if most_answers
        
        0.upto(max_count-1) do |i| %>
        <%= content_tag :th, i %>
      <% end %>
    </thead>
    <tbody>
      <% element_definitions.each do |element_definition| %>
        
      <%= content_tag :tr,render(:partial => "checklists/#{element_definition.kind}", :locals => { :element_definition => element_definition, :question_definition=> question_definition, :view=>view ,:edit=>edit, :max_count => max_count })%>
      <% end %>
 </tbody>
 </table>
 </div>
