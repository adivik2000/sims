<html>
  <head>
    <title>SIMS District Upload API</title>
  </head>
  <body>
    <h1>SIMS District Upload API</h1>
    <p> Each file when uploaded will overwrite the current content in the district.   For example, if you create a students.csv with just first graders, then upload another one with just second graders, SIMS will only have the second graders in the system.   Combine all your students into a single file.  
    </p>

    <p> Each file has one or more references to district keys in the form district_table_id. These must be: <ul>
      <li>unique- each show represent exactly one record</li>
      <li>persistent- they should remain the same over time, even over years.</li>
      <li>consistent- it must be the same number even when used in different files.</li>
    </ul>
    </p>


    <%= render :partial => 'file_summary', :object => CSVImporter::Examples, :locals=> {:head_extra => '(Filename)',:field_extra => '(fields)'} %>
    <%= render :partial => 'file_summary', :collection => ImportCSV.importers %>

   
    <div id="groups.csv">
      <h3>groups.csv</h3>
      <p>Named collections of students within a school.  It could be classroom sections of students, neighborhoods, teams.  Students and Users get assigned to them.</p>
        <p>district_group_id,district_school_id,name</p>
      <dl>
        <dt>district_group_id</dt> <dd>Key for group, this could be a string.  I recommend using a prefix, so sect314 would represent a section with a primary key of 314, then nei445 could be a neighborhood with id 445.   Keys must be unique so this is necessary if you're going to be combining data from different tables from your student information system</dd>
        <dt>district_school_id</dt> <dd>Key for school</dd>
        <dt>name</dt> <dd>The name of the group that will appear in SIMS.</dd>
      </dl>
    </div>

     <div id="schools.csv">
       <h3>schools.csv</h3>
       <p>Schools in the district</p>
      <p>district_school_id,name</p>
      <dl>
        <dt>district_school_id</dt> <dd>Key for school</dd>
        <dt>name</dt> <dd>Name of school</dd>
      </dl>
    </div>



    <div id="staff_assignments.csv">
      <h3>staff_assignments.csv</h3>
      <p>OPTIONAL- used when many users have access to a school but you want to limit the participants and other dropdowns to users that work at that school.    </p>
      <p>district_user_id,district_school_id</p>
      <dl>
        <dt>district_user_id</dt> <dd>Key for user</dd>
        <dt>district_school_id</dt> <dd>Key for school</dd>
      </dl>
    </div>


    
    
     <div id="students.csv">
       <h3>students.csv</h3>
       <p>Students in the district</p>

      <p>id_state,district_student_id,number,first_name,middle_name,last_name,suffix,birthdate,esl,special_ed</p>
      <dl>
        <dt>id_state</dt> <dd>WSLS# (or other state id for student)</dd>
        <dt>district_student_id</dt> <dd>Key used by district for student</dd>
        <dt>number</dt> <dd>Student number that would appear on report card or student id card.</dd>
        <dt>first_name</dt> <dd>First name of student.</dd>
        <dt>middle_name</dt> <dd>Middle name (or initial) of student.</dd>
        <dt>last_name</dt> <dd>Last name of student.</dd>
        <dt>suffix</dt> <dd>Suffix of student (jr. III).</dd>
        <dt>birthdate</dt> <dd>Date of Birth  (YYYY-MM-DD or MM/DD/YYYY)</dd>
        <dt>esl</dt> <dd>true if student is considered English as a Second Language  (false or blank if not Y/N also works)  </dd>
        <dt>special_ed</dt> <dd>true if student is in Special Educatin (false or blank if not Y/N also works)</dd>
      </dl>
    </div>



     <div id="system_flags.csv">
       <h3>system_flags.csv</h3>
       <p>Student Flags</p>
        <p>district_student_id,category,reason</p>
      <dl>
        <dt>district_student_id</dt> <dd>Key for student</dd>
        <dt>category</dt> <dd>Type of flag, currently one of math,attendance,languagearts,suspension,science,socialstudies,gifted</dd>
        <dt>reason</dt> <dd>A description of the reason the student was flagged.</dd>
      </dl>
    </div>

    <div id="student_groups.csv">
       <h3>student_groups.csv</h3>
       <p>Assigns students to groups. </p>
        <p>district_student_id,district_group_id</p>
      <dl>
        <dt>district_student_id</dt> <dd>Key for student</dd>
        <dt>district_group_id</dt> <dd>Key for group (the one you created for the SIMS group.)</dd>
      </dl>
    </div>



     <div id="users.csv">
       <h3>users.csv</h3>
       <p>Users in the district</p>
      <p>district_user_id,username,first_name,middle_name,last_name,suffix,email,passwordhash,salt</p>
      <dl>
        <dt>district_user_id</dt> <dd>Key for user</dd>
        <dt>username</dt> <dd>Used at login</dd>
        <dt>first_name</dt> <dd>First Name</dd>
        <dt>middle_name</dt> <dd>Middle Name</dd>
        <dt>last_name</dt> <dd>Last Name</dd>
        <dt>suffix</dt> <dd>Suffix</dd>
        <dt>email</dt> <dd>Email address</dd>
        <dt>passwordhash</dt> <dd>The encoded password.   Encode the password using the following:  SHA1.encode("#{system_hash}#{password.downcase}#{district_key}#{salt}")  replacing the #{} with the appropriate values.  system_hash is currently blank.   password is the user's password in lowercase, district_key is set by the district admin, and the salt is the next field</dd>
        <dt>salt</dt> <dd>A random value used in the password hash</dd>
      </dl>
    </div>



     <div id="user_groups.csv">
       <h3>user_groups.csv</h3>
       <p>Assigns users to groups. </p>
       <p>district_user_id,district_group_id,principal</p>
      <dl>
        <dt>district_user_id</dt> <dd>Key for user</dd>
        <dt>district_group_id</dt> <dd>Key for group (the one you created for the SIMS group.)</dd>
        <dt>principal</dt><dd>true if the user is the principal for that group, blank otherwise.   The most common case this would be used would be for assistant principals assigned to teams or neighborhoods.  Schoolwide (or asst principals by grade) would be covered by all_students_in_school.csv  (Y/N also works)</dd>
      </dl>
    </div>

   

    <div id="user_school_assignments.csv">
      <h3>user_school_assignments.csv</h3>
      <p>Assigns users to schools.  This provides access in the school selection screen </p>
      <p>district_user_id,district_school_id</p>
      <dl>
        <dt>district_user_id</dt> <dd>Key for user</dd>
        <dt>district_school_id</dt> <dd>Key for school</dd>
      </dl>
    </div>

  </body>
</html>
